<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>不知道</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://localhost:4000/"/>
  <updated>2016-08-06T06:10:21.000Z</updated>
  <id>http://localhost:4000/</id>
  
  <author>
    <name>Duncan Huang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>在 CentOS 6 安裝、設定 Observium</title>
    <link href="http://localhost:4000/CentOS/observium_installation_in_centos_6/"/>
    <id>http://localhost:4000/CentOS/observium_installation_in_centos_6/</id>
    <published>2016-05-30T16:00:00.000Z</published>
    <updated>2016-08-06T06:10:21.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><h2 id="建立-Nginx-Repo-設定檔"><a href="#建立-Nginx-Repo-設定檔" class="headerlink" title="建立 Nginx Repo 設定檔"></a>建立 Nginx Repo 設定檔</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/yum.repos.d/nginx.repo</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[nginx]</div><div class="line">name=nginx repo</div><div class="line">baseurl=http://nginx.org/packages/mainline/centos/6/$basearch/</div><div class="line">gpgcheck=0</div><div class="line">enabled=1</div></pre></td></tr></table></figure>
<h2 id="安裝-Nginx"><a href="#安裝-Nginx" class="headerlink" title="安裝 Nginx"></a>安裝 Nginx</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum install nginx -y</div><div class="line">chkconfig nginx on</div><div class="line">service nginx start</div></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="MariaDB"><a href="#MariaDB" class="headerlink" title="MariaDB"></a>MariaDB</h1><h2 id="先建立MariaDB-repo檔"><a href="#先建立MariaDB-repo檔" class="headerlink" title="先建立MariaDB repo檔"></a>先建立MariaDB repo檔</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/yum.repos.d/MariaDB.repo</div></pre></td></tr></table></figure>
<h3 id="MariaDB-5-5"><a href="#MariaDB-5-5" class="headerlink" title="MariaDB 5.5"></a>MariaDB 5.5</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#MariaDB 5.5 CentOS repository list</div><div class="line">#http://mariadb.org/mariadb/repositories/</div><div class="line">[mariadb]</div><div class="line">name=MariaDB</div><div class="line">baseurl=http://yum.mariadb.org/5.5/centos6-amd64</div><div class="line">gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</div><div class="line">gpgcheck=1</div></pre></td></tr></table></figure>
<h3 id="MariaDB-10-1-19"><a href="#MariaDB-10-1-19" class="headerlink" title="MariaDB 10.1.19"></a>MariaDB 10.1.19</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#MariaDB 10.1.19 CentOS repository list</div><div class="line">#http://mariadb.org/mariadb/repositories/</div><div class="line">[mariadb]</div><div class="line">name=MariaDB</div><div class="line">baseurl=http://yum.mariadb.org/10.1.9/centos6-amd64</div><div class="line">gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</div><div class="line">gpgcheck=1</div></pre></td></tr></table></figure>
<h2 id="安裝-MariabDB"><a href="#安裝-MariabDB" class="headerlink" title="安裝 MariabDB"></a>安裝 MariabDB</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum install MariaDB-client MariaDB-server -y</div><div class="line">service mysql start</div><div class="line">chkconfig mysql on</div></pre></td></tr></table></figure>
<h2 id="初始化-MariabDB"><a href="#初始化-MariabDB" class="headerlink" title="初始化 MariabDB"></a>初始化 MariabDB</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/bin/mysql_secure_installation</div></pre></td></tr></table></figure>
<h2 id="建立-MariabDB-帳號"><a href="#建立-MariabDB-帳號" class="headerlink" title="建立 MariabDB 帳號"></a>建立 MariabDB 帳號</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/usr/bin/mysql -u root -p</div><div class="line">grant all on *.* to [user]@&apos;%&apos; identified by &apos;[password]&apos; with grant option;</div><div class="line">flush privileges;</div></pre></td></tr></table></figure>
<h1 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h1><h2 id="安裝-PHP"><a href="#安裝-PHP" class="headerlink" title="安裝 PHP"></a>安裝 PHP</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum --enablerepo=remi install php php-mysql php-gd php-posix php-mcrypt \</div><div class="line">php-pear php-fpm vixie-cron net-snmp net-snmp-utils fping MySQL-python rrdtool \</div><div class="line">subversion jwhois ipmitool graphviz ImageMagick libvirt -y</div></pre></td></tr></table></figure>
<h2 id="修改-php-ini"><a href="#修改-php-ini" class="headerlink" title="修改 php.ini"></a>修改 php.ini</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/php.ini</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cgi.fix_pathinfo=1</div><div class="line">↓</div><div class="line">cgi.fix_pathinfo=0</div></pre></td></tr></table></figure>
<h2 id="啟動PHP-FPM服務"><a href="#啟動PHP-FPM服務" class="headerlink" title="啟動PHP-FPM服務"></a>啟動PHP-FPM服務</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service php-fpm start</div><div class="line">chkconfig php-fpm on</div></pre></td></tr></table></figure>
<h2 id="配置-Nginx-設定"><a href="#配置-Nginx-設定" class="headerlink" title="配置 Nginx 設定"></a>配置 Nginx 設定</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/nginx/nginx.conf</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">user nginx;</div><div class="line">worker_processes 4;</div><div class="line">worker_cpu_affinity 0001 0010 0100 1000;</div><div class="line">worker_rlimit_nofile 1024;</div><div class="line">pid /var/run/nginx.pid;</div><div class="line"> </div><div class="line">events &#123;</div><div class="line">    use epoll;</div><div class="line">    worker_connections 2048;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">http &#123;</div><div class="line">    sendfile on;</div><div class="line">    tcp_nopush on;</div><div class="line">    tcp_nodelay on;</div><div class="line">    keepalive_timeout 65;</div><div class="line">    types_hash_max_size 2048;</div><div class="line">    server_names_hash_bucket_size 128;</div><div class="line"> </div><div class="line">    include /etc/nginx/mime.types;</div><div class="line">    default_type application/octet-stream;</div><div class="line"> </div><div class="line">    client_header_buffer_size 2k;</div><div class="line">    large_client_header_buffers 4 4k;</div><div class="line">    open_file_cache max=102400 inactive=20s;</div><div class="line">    </div><div class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</div><div class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</div><div class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</div><div class="line">  </div><div class="line">    access_log /var/log/nginx/access.log;</div><div class="line">    error_log /var/log/nginx/error.log;</div><div class="line"> </div><div class="line">    gzip on;</div><div class="line">    gzip_disable &quot;msie6&quot;;</div><div class="line"> </div><div class="line">    include /etc/nginx/conf.d/*.conf;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Observium"><a href="#Observium" class="headerlink" title="Observium"></a>Observium</h1><h2 id="建立-Observium-要用的-DB-帳號"><a href="#建立-Observium-要用的-DB-帳號" class="headerlink" title="建立 Observium 要用的 DB 帳號"></a>建立 Observium 要用的 DB 帳號</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -u root -p</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> observium <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</div><div class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> observium.* <span class="keyword">TO</span> <span class="string">'observium'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'observium'</span>;</div><div class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</div></pre></td></tr></table></figure>
<h2 id="下載-Observium"><a href="#下載-Observium" class="headerlink" title="下載 Observium"></a>下載 Observium</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /opt</div><div class="line">mkdir -p /opt/observium</div><div class="line">wget http://www.observium.org/observium-community-latest.tar.gz</div><div class="line">tar -zxvf observium-community-latest.tar.gz</div></pre></td></tr></table></figure>
<h2 id="安裝-Observium"><a href="#安裝-Observium" class="headerlink" title="安裝 Observium"></a>安裝 Observium</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd observium</div><div class="line">cp config.php.default config.php</div></pre></td></tr></table></figure>
<h3 id="設定-config-php"><a href="#設定-config-php" class="headerlink" title="設定 config.php"></a>設定 config.php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi config.php</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># 修改 db username, password</div><div class="line">$config[&apos;db_user&apos;] = &apos;observium&apos;;</div><div class="line">$config[&apos;db_pass&apos;] = &apos;observium&apos;;</div><div class="line"></div><div class="line"># 新增設定</div><div class="line">$config[&apos;geocoding&apos;][&apos;enable&apos;] = TRUE;</div><div class="line">$config[&apos;geocoding&apos;][&apos;api&apos;] = &apos;mapquest&apos;;</div><div class="line">$config[&apos;fping&apos;] = &quot;/usr/sbin/fping&quot;;</div></pre></td></tr></table></figure>
<h3 id="安裝-Observium-資料表"><a href="#安裝-Observium-資料表" class="headerlink" title="安裝 Observium 資料表"></a>安裝 Observium 資料表</h3><blockquote>
<p>可能要執行兩次</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/observium/discovery.php -u</div></pre></td></tr></table></figure>
<h3 id="建立-logs-以及-rrd-的目錄"><a href="#建立-logs-以及-rrd-的目錄" class="headerlink" title="建立 logs 以及 rrd 的目錄"></a>建立 logs 以及 rrd 的目錄</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># log dir</div><div class="line">mkdir /opt/observium/logs</div><div class="line">chown apache:apache /opt/observium/logs</div><div class="line"></div><div class="line"># rrd dir</div><div class="line">mkdir /opt/observium/rrd</div><div class="line">chown apache:apache /opt/observium/rrd</div></pre></td></tr></table></figure>
<h3 id="設定-observium-虛擬網站的網頁目錄"><a href="#設定-observium-虛擬網站的網頁目錄" class="headerlink" title="設定 observium 虛擬網站的網頁目錄"></a>設定 observium 虛擬網站的網頁目錄</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/nginx/conf.d/default.conf</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">#</div><div class="line"># The default server</div><div class="line">#</div><div class="line">server &#123;</div><div class="line">    listen       80;</div><div class="line">    server_name  [server name];</div><div class="line"></div><div class="line">    charset utf-8;</div><div class="line"></div><div class="line">    access_log /var/log/nginx/observium.access.log main;</div><div class="line">    error_log /var/log/nginx/observium.error.log warn;</div><div class="line">    </div><div class="line">    root   /opt/observium/html/;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        try_files $uri $uri/ /index.php?$args;</div><div class="line">        index index.php  index.html index.htm;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</div><div class="line">    #</div><div class="line">    location ~ \.php$ &#123;</div><div class="line">        fastcgi_pass   127.0.0.1:9000;</div><div class="line">        fastcgi_index  index.php;</div><div class="line">        fastcgi_param  SCRIPT_FILENAME   $document_root$fastcgi_script_name;</div><div class="line">        include        fastcgi_params;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    gzip on;</div><div class="line">    gzip_min_length 1k;</div><div class="line">    gzip_buffers 4 16k;</div><div class="line">    gzip_http_version 1.1;</div><div class="line">    gzip_comp_level 2;</div><div class="line">    gzip_types text/plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</div><div class="line">    gzip_vary on;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="建立帳號，level-10-是-admin"><a href="#建立帳號，level-10-是-admin" class="headerlink" title="建立帳號，level 10 是 admin"></a>建立帳號，level 10 是 admin</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/observium/adduser.php admin [password] 10</div></pre></td></tr></table></figure>
<h3 id="調整-cronjob"><a href="#調整-cronjob" class="headerlink" title="調整 cronjob"></a>調整 cronjob</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">crontab -e</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">33 */6 * * * /opt/observium/discovery.php -h all &gt;&gt; /dev/null 2&gt;&amp;1</div><div class="line">*/5 * * * * /opt/observium/discovery.php -h new &gt;&gt; /dev/null 2&gt;&amp;1</div><div class="line">*/5 * * * * /opt/observium/poller-wrapper.py 2 &gt;&gt; /dev/null 2&gt;&amp;1</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/crond reload</div></pre></td></tr></table></figure>
<h1 id="新增監控主機"><a href="#新增監控主機" class="headerlink" title="新增監控主機"></a>新增監控主機</h1><blockquote>
<p>Observium 不接受 IP，所要被被監控主機的IP要先去 /etc/hosts 設定假的 Domain</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/hosts</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/observium/add_device.php [hostname] public v2c</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/opt/observium/discovery.php -h all</div><div class="line">/opt/observium/poller.php -h all</div></pre></td></tr></table></figure>
<h1 id="被監控主機安裝-SNMP"><a href="#被監控主機安裝-SNMP" class="headerlink" title="被監控主機安裝 SNMP"></a>被監控主機安裝 SNMP</h1><h2 id="Centos-安裝、設定-SNMP"><a href="#Centos-安裝、設定-SNMP" class="headerlink" title="Centos 安裝、設定 SNMP"></a>Centos 安裝、設定 SNMP</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum install net-snmp net-snmp-utils -y</div><div class="line">chkconfig snmpd on</div><div class="line">service snmpd start</div></pre></td></tr></table></figure>
<h3 id="測試"><a href="#測試" class="headerlink" title="測試"></a>測試</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">snmpwalk -c public -v 1 localhost system</div></pre></td></tr></table></figure>
<h3 id="設定-SNMP"><a href="#設定-SNMP" class="headerlink" title="設定 SNMP"></a>設定 SNMP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cp /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.orig</div><div class="line">vi /etc/snmp/snmpd.conf</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">####</div><div class="line"># First, map the community name &quot;public&quot; into a &quot;security name&quot;</div><div class="line"></div><div class="line">#       sec.name  source           community</div><div class="line">com2sec local     localhost        public</div><div class="line">com2sec mynetwork [允許IP]/32       [自訂名稱]</div><div class="line"></div><div class="line">####</div><div class="line"># Second, map the security name into a group name:</div><div class="line"></div><div class="line">#       groupName      securityModel securityName</div><div class="line">group   MyRWGroup      any           local</div><div class="line">group   MyROGroup      v2c           mynetwork</div><div class="line"></div><div class="line">####</div><div class="line"># Third, create a view for us to let the group have rights to:</div><div class="line"></div><div class="line"># Make at least  snmpwalk -v 1 localhost -c public system fast again.</div><div class="line">#       name           incl/excl     subtree              mask(optional)</div><div class="line">view    all            included      .1                   80</div><div class="line"></div><div class="line">####</div><div class="line"># Finally, grant the group read-only access to the systemview view.</div><div class="line"></div><div class="line">#       group          context sec.model sec.level prefix read write  notif</div><div class="line">access  MyRWGroup      &quot;&quot;      any       noauth    0      all  all    all</div><div class="line">access  MyROGroup      &quot;&quot;      any       noauth    0      all  none   none</div><div class="line"></div><div class="line">syslocation Taiwan</div><div class="line"></div><div class="line">disk / 10000</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service snmpd restart</div></pre></td></tr></table></figure>
<h2 id="開啟-UDP-161-Port"><a href="#開啟-UDP-161-Port" class="headerlink" title="開啟 UDP 161 Port"></a>開啟 UDP 161 Port</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vi /etc/sysconfig/iptables</div><div class="line">-A INPUT -m state --state NEW -m udp -p udp -s [Observium Server IP] --dport 161 -j ACCEPT</div><div class="line">service iptables restart</div></pre></td></tr></table></figure>
<h2 id="測試-1"><a href="#測試-1" class="headerlink" title="測試"></a>測試</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">snmpget -v 1 -c &quot;public&quot; localhost .1.3.6.1.4.1.2021.9.1.2.1</div><div class="line"># UCD-SNMP-MIB::dskPath.1 = STRING: /</div><div class="line"></div><div class="line">snmpget -v 1 -c &quot;public&quot; localhost .1.3.6.1.4.1.2021.9.1.3.1</div><div class="line"># UCD-SNMP-MIB::dskDevice.1 = STRING: /dev/mapper/VolGroup-lv_root</div><div class="line"></div><div class="line">snmpget -v 1 -c &quot;public&quot; localhost .1.3.6.1.4.1.2021.4.5.0 </div><div class="line"># UCD-SNMP-MIB::memTotalReal.0 = INTEGER: 3973956 kB</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Nginx&quot;&gt;&lt;a href=&quot;#Nginx&quot; class=&quot;headerlink&quot; title=&quot;Nginx&quot;&gt;&lt;/a&gt;Nginx&lt;/h1&gt;&lt;h2 id=&quot;建立-Nginx-Repo-設定檔&quot;&gt;&lt;a href=&quot;#建立-Nginx-Repo-設定檔&quot; class=&quot;headerlink&quot; title=&quot;建立 Nginx Repo 設定檔&quot;&gt;&lt;/a&gt;建立 Nginx Repo 設定檔&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vi /etc/yum.repos.d/nginx.repo&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[nginx]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;name=nginx repo&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;baseurl=http://nginx.org/packages/mainline/centos/6/$basearch/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;gpgcheck=0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;enabled=1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;安裝-Nginx&quot;&gt;&lt;a href=&quot;#安裝-Nginx&quot; class=&quot;headerlink&quot; title=&quot;安裝 Nginx&quot;&gt;&lt;/a&gt;安裝 Nginx&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yum install nginx -y&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;chkconfig nginx on&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;service nginx start&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Observium" scheme="http://localhost:4000/tags/Observium/"/>
    
      <category term="CentOS" scheme="http://localhost:4000/tags/CentOS/"/>
    
  </entry>
  
</feed>
